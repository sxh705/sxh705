# 第三章

# 试描述hdfs中的块与普通文件系统中的块的区别

在传统的文件系统中，为了提高磁盘读写速率，一般以数据块为单位，而不是以字节为单位

hdfs中的块，默认一个块大小为64mb，而hdfs中的文件会被拆分为多个块，每个块作为独立的单元进行存储。hdfs在块的大小设计上明显要大于普通文件系统。

# 试描述hdfs中的名称节点和数据节点的具体功能

* 名称节点负责管理分布式文件系统的命名空间，记录分布式文件系统中的每个文件中各个块所在的数据节点的位置信息。

* 数据节点是分布式文件系统hdfs的工作节点，负责数据的存储和读取，会根据客户端或者是名称节点的调度来进行数据的存储和检索，并向名称节点定期发送自己所存储的块的列表。

# 在分布式文件系统中，中心节点的设计至关重要，请阐述hdfs是如何减轻中心节点负担的

* 首先：采用主从架构，一个hdfs集群**包括一个名称节点和若干个数据节点**

* 其次是**第二名称节点**，为了有效解决editlog变大的问题，hdfs设计采用了第二名称节点，**可以完成editlog和fsimage的合并操作，减小editlog文件大小，缩短名称节点的重启时间**，**其次可以作为名称节点的检查点**，来保存名称节点的元数据信息。

# 试述HDFS的冗余数据保存策略

* hdfs采用**多副本**的方法对数据进行冗余存储，通常一个数据块的多个副本会被分布到不同的数据节点上。

# 试述hdfs是如何探测错误发生以及如何恢复的。

hdfs的错误可以分为三种情况：

## 名称节点出错

**名称节点**发生宕机(或者是FsImage和EditLog损坏)

首先到远程挂载的网络文件系统中获取备份的**元数据**信息,

放到**第二名称节点**上进行恢复,并把第二名称节点作为名称节点来使用.

## 数据节点出错

**数据节点发生故障或者断网**,从而导致数据节点无法定期向名称节点发送心跳,

名称节点会定期检查数据节点的心跳,通过数据冗余复制来生产新的副本

## 数据出错

### 如何探测

文件被创建时,客户端会对每个文件块进行信息摘录,

并把这些信息写入同一个路径的隐藏文件里

